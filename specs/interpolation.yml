---
tests:
  - name: No Interpolation
    data: { }
    template: |
      Hello from Mustache!
    expected: |
      Hello from Mustache!

  - name: Basic Behavior
    data: { subject: "world" }
    template: |
      Hello, {{subject}}!
    expected: |
      Hello, world!

  - name: Escaped Interpolation
    data: { forbidden: '& " < >' }
    template: |
      These characters should be HTML escaped: {{forbidden}}
    expected: |
      These characters should be HTML escaped: &amp; &quot; &lt; &gt;

  - name: Unescaped via Triple Mustache
    data: { forbidden: '& " < >' }
    template: |
      These characters should not be HTML escaped: {{{forbidden}}}
    expected: |
      These characters should not be HTML escaped: & " < >

  - name: Unescaped via the Ampersand
    data: { forbidden: '& " < >' }
    template: |
      These characters should not be HTML escaped: {{&forbidden}}
    expected: |
      These characters should not be HTML escaped: & " < >

  # Whitespace Sensitivity

  - name: Interpolation Respects Surrounding Whitespace
    data: { string: '---' }
    template: '| {{string}} |'
    expected: '| --- |'

  - name: Triple Mustache Respects Surrounding Whitespace
    data: { string: '---' }
    template: '| {{{string}}} |'
    expected: '| --- |'

  - name: Ampersand Respects Surrounding Whitespace
    data: { string: '---' }
    template: '| {{&string}} |'
    expected: '| --- |'

  # Whitespace Insensitivity

  - name: Interpolation Ignores Padding Whitespace
    data: { string: "---" }
    template: '|{{ string }}|'
    expected: '|---|'

  - name: Triple Mustache Ignores Padding Whitespace
    data: { string: "---" }
    template: '|{{{ string }}}|'
    expected: '|---|'

  - name: Ampersand Ignores Padding Whitespace
    data: { string: "---" }
    template: '|{{& string }}|'
    expected: '|---|'
