---
version: '0.0.1a'
tests:

  #########
  # Partals

  - name: Basic Partial Injection
    data: { }
    template: '<< {{>text}}'
    partials: { text: 'from partial' }
    expected: '<< from partial'

  - name: Basic Partial with Tags
    data: { text: 'content' }
    template: '<< {{>partial}}'
    partials: { partial: '*{{text}}*' }
    expected: '<< *content*'

  - name: Basic Partial Injection Using '<'
    data: { }
    template: '<< {{<text}}'
    partials: { text: 'from partial' }
    expected: '<< from partial'

  - name: Basic Partial with Tags Using '<'
    data: { text: 'content' }
    template: '<< {{<partial}}'
    partials: { partial: '*{{text}}*' }
    expected: '<< *content*'

  - name: Partial Indentation
    data: { text: 'content' }
    template: |
      ---
        {{>multiline}}
      ---
    partials:
      multiline: |
        A: {{text}}
        B: {{text}}
        C: {{text}}
    expected: |
      ---
        A: content
        B: content
        C: content
      ---

  - name: Recursive Partials
    data:
      nodes:
        - content: 'First Parent'
          nodes:
            - content: "First Parent's First Child"
              nodes: []
        - content: 'Second Parent'
          nodes: []
        - content: 'Third Parent'
          nodes:
            - content: "Third Parent's First Child"
              nodes: []
            - content: "Third Parent's Second Child"
              nodes: []
    template: |
      <ul>
        {{#nodes}}
          {{>node}}
        {{/nodes}}
      </ul>
    partials:
      node: |
        <li>
          {{content}}
          {{#nodes}}
            <ul>
              {{>node}}
            </ul>
          {{/nodes}}
        </li>
    expected: |
      <ul>
        <li>
          First Parent
          <ul>
            <li>
              First Parent's First Child
            </li>
          </ul>
        </li>
        <li>
          Second Parent
        </li>
        <li>
          Third Parent
          <ul>
            <li>
              Third Parent's First Child
            </li>
            <li>
              Third Parent's Second Child
            </li>
          </ul>
        </li>
      </ul>

  ###################
  # In-Tag Whitespace

  - name: Interpolation With Leading Whitespace
    data: { subject: "world" }
    template: |
      Hello, {{  subject}}!
    expected: |
      Hello, world!

  - name: Interpolation With Trailing Whitespace
    data: { subject: "world" }
    template: |
      Hello, {{subject  }}!
    expected: |
      Hello, world!

  - name: Interpolation With Whitespace Padding
    data: { subject: "world" }
    template: |
      Hello, {{  subject  }}!
    expected: |
      Hello, world!

  - name: Triple Mustache Interpolation With Leading Whitespace
    data: { subject: "world" }
    template: |
      Hello, {{{  subject}}}!
    expected: |
      Hello, world!

  - name: Triple Mustache Interpolation With Trailing Whitespace
    data: { subject: "world" }
    template: |
      Hello, {{{subject  }}}!
    expected: |
      Hello, world!

  - name: Triple Mustache Interpolation With Whitespace Padding
    data: { subject: "world" }
    template: |
      Hello, {{{  subject  }}}!
    expected: |
      Hello, world!

  - name: Unescaped Interpolation With Leading Whitespace
    data: { subject: "world" }
    template: |
      Hello, {{&  subject}}!
    expected: |
      Hello, world!

  - name: Unescaped Interpolation With Trailing Whitespace
    data: { subject: "world" }
    template: |
      Hello, {{&subject  }}!
    expected: |
      Hello, world!

  - name: Unescaped Interpolation With Whitespace Padding
    data: { subject: "world" }
    template: |
      Hello, {{&  subject  }}!
    expected: |
      Hello, world!
